(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,a){e.exports=a(89)},42:function(e,t,a){},82:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(18),i=a.n(o),r=(a(42),a(1)),c=a(2),l=a(5),u=a(4),m=a(6),h=a(3),d=a(90),p=a(92),b=a(93),v=a(19),f=function(e){function t(e){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:"col-md-4"},s.a.createElement("div",{className:"mission-card card-2 font-light",onClick:this.props.onSelect},s.a.createElement("h4",null,this.props.mission.name),s.a.createElement("p",null,this.props.mission.description),s.a.createElement("div",{className:"progress mission-progress"},s.a.createElement("div",{className:"progress-bar mission-progress-bar",style:{width:"25%"}})),s.a.createElement("p",null,"0/0 uko\u0144czone")))}}]),t}(s.a.Component),g=a(8),k=a.n(g),y="funcrowd_user",O=new(function(){function e(){Object(r.a)(this,e),this.token=null,this.config={},this.is_logged=!1}return Object(c.a)(e,[{key:"login",value:function(e,t){this.token=e.token,this.is_logged=!0,this.config={headers:{Authorization:"Token "+e.token}},sessionStorage.setItem(y,JSON.stringify(e)),t&&localStorage.setItem(y,JSON.stringify(e))}},{key:"logout",value:function(){this.is_logged=!1,this.token=null,this.config={},localStorage.removeItem(y),sessionStorage.removeItem(y)}},{key:"getUser",value:function(){var e=this.getSessionUser();return null===e&&(e=this.getLocalStorageUser()),e}},{key:"getSessionUser",value:function(){var e=null;try{e=JSON.parse(sessionStorage.getItem(y))}catch(t){}return e}},{key:"getLocalStorageUser",value:function(){var e=null;try{e=JSON.parse(localStorage.getItem(y))}catch(t){}return e}}]),e}()),E=function(){function e(t,a){Object(r.a)(this,e),this.id=t,this.name=a}return Object(c.a)(e,null,[{key:"fromJson",value:function(t){return new e(t.id,t.name)}}]),e}(),j=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,null,[{key:"all",value:function(){return k.a.get("http://localhost:8888/api/v1/missions",O.config).then(function(e){return e.data.map(function(e){return E.fromJson(e)})})}},{key:"get",value:function(e){return k.a.get("http://localhost:8888/api/v1/missions/"+e,O.config).then(function(e){return E.fromJson(e.data)})}}]),e}(),S=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={missions:null,loading:!0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.all().then(function(t){e.setState({loading:!1,missions:t})}).catch(function(t){e.setState({loading:!1}),console.log(t)})}},{key:"getCardsPanel",value:function(){var e=this,t=null;if(this.state.loading)t=s.a.createElement("div",null,"Loading");else{var a=this.state.missions.map(function(t,a){return s.a.createElement(f,{key:a,mission:t,onSelect:function(){return e.props.onMissionSelect(t)}})});t=s.a.createElement("div",{className:"row"},a)}return t}},{key:"render",value:function(){return s.a.createElement("div",{className:"row base-row"},s.a.createElement("div",{className:"col-sm-12 missions-header-bar"},s.a.createElement("h3",null,"A witojcie w Excelu tutorial"),s.a.createElement("p",null,"Najlepszy lorem ipsum tutorial do excela, wszystkiego sie tu nauczycie.")),s.a.createElement("div",{className:"col-sm-12"},this.getCardsPanel()))}}]),t}(s.a.Component),N=a(14),C=function(){function e(t,a,n,s,o){Object(r.a)(this,e),this.id=t,this.username=a,this.email=n,this.token=s,this.group=o}return Object(c.a)(e,null,[{key:"fromJson",value:function(t){return new e(t.id,t.username,t.email,t.token,t.group)}}]),e}(),w=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,null,[{key:"login",value:function(e,t){return k.a.post("http://localhost:8888/api/v1/users/login",{username:e,password:t}).then(function(e){return C.fromJson(e.data)})}},{key:"mturk",value:function(e){return k.a.post("http://localhost:8888/api/v1/users/mturk",{worker_id:e}).then(function(e){return C.fromJson(e.data)})}}]),e}(),x=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={login:"",password:"",stayLoggedIn:!1,loading:!1},a.validateForm=a.validateForm.bind(Object(h.a)(Object(h.a)(a))),a.handleChange=a.handleChange.bind(Object(h.a)(Object(h.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"validateForm",value:function(){return this.state.login.length>0&&this.state.password.length>0}},{key:"handleChange",value:function(e){this.setState(Object(N.a)({},e.target.id,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.login,n=this.state.password,s=this.state.stayLoggedIn;this.setState({loading:!0}),w.login(a,n).then(function(e){t.props.onSuccess(e,s)}).catch(function(e){t.setState({loading:!1}),console.log(e)})}},{key:"render",value:function(){return this.state.loading?s.a.createElement("div",null,"Loading"):s.a.createElement("div",{className:"login-app baseapp"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-8 offset-sm-2 card-3-static login-card"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-12"},s.a.createElement("h3",null,"Zaloguj do systemu"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Login"),s.a.createElement("input",{id:"login",type:"login",className:"form-control",value:this.state.email,onChange:this.handleChange,placeholder:"Login"}),s.a.createElement("small",{id:"loginHelp",className:"form-text text-muted"},"Nazwa u\u017cytkownika podana podczas rejestracji")),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Has\u0142o"),s.a.createElement("input",{id:"password",type:"password",className:"form-control",value:this.state.password,onChange:this.handleChange,placeholder:"Has\u0142o"})),s.a.createElement("div",{className:"form-check"},s.a.createElement("input",{id:"stayLoggedIn",type:"checkbox",className:"form-check-input",value:this.state.stayLoggedIn,onChange:this.handleChange}),s.a.createElement("label",{className:"form-check-label"},"Pozosta\u0144 zalogowany")),s.a.createElement("button",{type:"submit",disabled:!this.validateForm(),className:"btn btn-primary"},"Submit")))))))}}]),t}(s.a.Component),I=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={name:null,onClick:null},a.onClick=a.onClick.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onClick",value:function(){null!==this.state.onClick&&this.state.onClick()}},{key:"render",value:function(){return s.a.createElement("li",{className:"nav-item"},s.a.createElement("button",{className:"nav-link btn btn-link",href:"#",onClick:this.onClick},this.state.name))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.name!==t.name||e.onClick!==t.onClick?{name:e.name,onClick:e.onClick}:null}}]),t}(s.a.Component),B=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={user:null},a.onLogout=a.onLogout.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onLogout",value:function(){this.props.onLogout()}},{key:"render",value:function(){return this.state.user?s.a.createElement("div",null,s.a.createElement("div",{style:{position:"absolute",right:"80px",top:"18px"}},"Hello, ",this.state.user.username),s.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarToggler","aria-controls":"navbarToggler","aria-expanded":"false","aria-label":"Toggle navigation"},s.a.createElement("span",{className:"navbar-toggler-icon"})),s.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarToggler"},s.a.createElement("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0"},s.a.createElement(I,{onClick:this.props.onNavigateToBounties,name:"Bounties"})))):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.user!==t.user?{user:e.user}:null}}]),t}(s.a.Component),T=a(13),A=a(27),F=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={user:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("nav",{className:"navbar card-2-static fixed-top navbar-expand-lg navbar-light bg-light"},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement(T.Icon,{icon:A.user,size:24,style:{position:"absolute",top:"calc(50% - 18px)"}}),s.a.createElement("span",{style:{marginLeft:"32px"}},"FunCrowd")),s.a.createElement(B,{user:this.state.user,onLogout:this.props.onLogout,onNavigateToMissions:this.props.onNavigateToMissions,onNavigateToBounties:this.props.onNavigateToBounties}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.user!==t.user?{user:e.user}:null}}]),t}(s.a.Component),L=function(){function e(t,a,n,s){Object(r.a)(this,e),this.id=t,this.name=a,this.description=n,this.instruction=s}return Object(c.a)(e,null,[{key:"fromJson",value:function(t){return new e(t.id,t.name,t.description,t.instruction)}}]),e}(),D=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,null,[{key:"list",value:function(e){return k.a.get("http://localhost:8888/api/v1/missions/"+e+"/tasks",O.config).then(function(e){return e.data.map(function(e){return L.fromJson(e)})})}},{key:"get",value:function(e){return k.a.get("http://localhost:8888/api/v1/tasks/"+e,O.config).then(function(e){return L.fromJson(e.data)})}}]),e}(),M=function(e){function t(e){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"col-md-4"},s.a.createElement("div",{className:"task-card card-2",onClick:this.props.onSelect},s.a.createElement("h4",null,this.props.task.name),s.a.createElement("p",null,"0/0 uko\u0144czone")))}}]),t}(s.a.Component),P=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,tasks:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.checkState()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.mission!==e.mission&&this.checkState()}},{key:"checkState",value:function(){var e=this;if(null===this.props.mission){var t=this.props.match.params.id;j.get(t).then(function(t){e.props.onMissionSelect(t)})}else this.getTasksList()}},{key:"getTasksList",value:function(){var e=this;console.log("getting tasks list");var t=this.props.mission;D.list(t.id).then(function(t){e.setState({loading:!1,tasks:t})}).catch(function(t){e.setState({loading:!1}),console.log(t)})}},{key:"getCardsPanel",value:function(){var e=this;if(this.state.loading)return s.a.createElement("div",null,"Loading");var t=null;return null!==this.state.tasks&&(t=this.state.tasks.map(function(t,a){return s.a.createElement(M,{key:a,task:t,onSelect:function(){return e.props.onTaskSelect(t)}})})),s.a.createElement("div",{className:"row"},t)}},{key:"render",value:function(){return s.a.createElement("div",{className:"row base-row"},s.a.createElement("div",{className:"col-sm-12"},s.a.createElement("h3",null,"Taski")),s.a.createElement("div",{className:"col-sm-12"},this.getCardsPanel()))}}]),t}(s.a.Component),z=function(e){function t(e){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,s.a.createElement("strong",null,this.props.name)),s.a.createElement("div",null,this.props.value))}}]),t}(s.a.Component),_=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.props.onChange(e)}},{key:"shouldComponentUpdate",value:function(e,t){return e.value!==this.props.value}},{key:"render",value:function(){return s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,this.props.name),s.a.createElement("input",{id:this.props.name,value:this.props.value,onChange:this.handleChange,className:"form-control",required:this.props.required,type:"text"}))}}]),t}(s.a.Component),U=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.props.onChange(e)}},{key:"shouldComponentUpdate",value:function(e,t){return e.value!==this.props.value}},{key:"render",value:function(){return s.a.createElement("label",{className:"radio-container"},s.a.createElement("input",{id:this.props.name,name:this.props.name,value:this.props.value,onChange:this.handleChange,type:"radio"}),s.a.createElement("span",{className:"radiomark"}),this.props.value)}}]),t}(s.a.Component),J=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.props.onChange(e)}},{key:"shouldComponentUpdate",value:function(e,t){return e.value!==this.props.value}},{key:"render",value:function(){var e=this,t=this.props.source.map(function(t){return s.a.createElement(U,{key:t,name:e.props.name,onChange:e.handleChange,required:e.props.required,value:t})});return s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,s.a.createElement("strong",null,this.props.name)),t)}}]),t}(s.a.Component),R={TextLabel:z,ChoiceField:J,PDF:z,TextField:_,RadioField:J,MultiChoiceField:function(e){function t(e){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,this.props.name),s.a.createElement("div",null,this.props.value))}}]),t}(s.a.Component),SelectField:function(e){function t(e){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.value.map(function(e){return s.a.createElement("option",{value:e})});return s.a.createElement("div",{className:"form-group"},s.a.createElement("select",{className:"form-control"},e))}}]),t}(s.a.Component)},H=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,[{key:"create",value:function(e,t,a,n,o,i,r){if("Hidden"===e)return null;var c=R[e];return s.a.createElement(c,{name:t,value:a,source:n,key:t,required:o,disabled:i,onChange:r})}}]),e}(),q=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onCancel=a.onCancel.bind(Object(h.a)(Object(h.a)(a))),a.onAccept=a.onAccept.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onCancel",value:function(){this.props.onCancel()}},{key:"onAccept",value:function(){this.props.onAccept()}},{key:"render",value:function(){return s.a.createElement("div",{className:"modal-base"},s.a.createElement("div",{className:"shadow",onClick:this.onCancel}),s.a.createElement("div",{className:"skipping-panel card-3-static"},s.a.createElement("h4",null,"Skip this item"),s.a.createElement("p",null,"Are you sure you want to skip this item?"),s.a.createElement("button",{className:"btn btn-default",style:{marginLeft:"20px",marginRight:"20px",width:"80px"},onClick:this.onAccept},"Yes"),s.a.createElement("button",{className:"btn btn-green",style:{marginLeft:"20px",marginRight:"20px",width:"80px"},onClick:this.onCancel},"No")))}}]),t}(s.a.Component),W=new H,Y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={loading:!1,blocked:!1,skipping:!1},a.setupItem(e.item),a.validateForm=a.validateForm.bind(Object(h.a)(Object(h.a)(a))),a.handleChange=a.handleChange.bind(Object(h.a)(Object(h.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(Object(h.a)(a))),a.skipItem=a.skipItem.bind(Object(h.a)(Object(h.a)(a))),a.onSkipAccept=a.onSkipAccept.bind(Object(h.a)(Object(h.a)(a))),a.onSkipCancel=a.onSkipCancel.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setItemState(this.props.item)}},{key:"componentWillReceiveProps",value:function(e){this.setItemState(e.item)}},{key:"setupItem",value:function(e){for(var t=0;t<e.template.fields.length;t++){var a=e.template.fields[t];this.state[a.name]=""}}},{key:"setItemState",value:function(e){for(var t={blocked:!1,loading:!1},a=0;a<e.template.fields.length;a++){var n=e.template.fields[a],s=e.data[n.name];null==s&&(s=""),t[n.name]=s}t.item=e,this.setState(t)}},{key:"validateForm",value:function(){for(var e=this.state.blocked,t=this.props.item,a=0;a<t.template.fields.length;a++){var n=t.template.fields[a];if(n.required&&n.editable&&!this.state[n.name])return!1}return!e}},{key:"handleChange",value:function(e){this.setState(Object(N.a)({},e.target.id,e.target.value))}},{key:"getAnnotationData",value:function(){for(var e=this.props.item,t={},a=0;a<e.template.fields.length;a++){var n=e.template.fields[a];n.editable&&(this.state[n.name]?t[n.name]=this.state[n.name]:t[n.name]="")}return t}},{key:"handleSubmit",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&e.preventDefault();var n=this.props.item,s={data:this.getAnnotationData(),skipped:a};k.a.post("http://localhost:8888/api/v1/items/"+n.id+"/annotation",s,O.config).then(function(e){t.setState({blocked:!0,loading:!0}),t.props.onAnnotationPost(e)}).catch(function(e){alert(e)})}},{key:"skipItem",value:function(e){e.preventDefault(),this.setState({skipping:!0})}},{key:"onSkipAccept",value:function(){this.setState({skipping:!1}),this.handleSubmit(null,!0)}},{key:"onSkipCancel",value:function(){this.setState({skipping:!1})}},{key:"render",value:function(){var e=this;if(this.state.loading)return s.a.createElement("div",null,"Loading");var t=this.props.item,a=t.template.fields.map(function(a){return W.create(a.widget,a.name,e.state[a.name],t.data[a.data_source],a.required,e.state.blocked,e.handleChange)}),n=null;return this.state.skipping&&(n=s.a.createElement(q,{onAccept:this.onSkipAccept,onCancel:this.onSkipCancel})),s.a.createElement("form",{onSubmit:this.handleSubmit},n,a,s.a.createElement("div",{style:{textAlign:"right"}},s.a.createElement("button",{onClick:this.skipItem,style:{marginRight:"10px",width:"80px"},className:"btn btn-default"},"Skip"),s.a.createElement("button",{type:"submit",disabled:!this.validateForm(),style:{width:"120px"},className:"btn btn-green"},"Submit")))}}]),t}(s.a.Component),G={ReferenceScore:function(e){function t(e){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e="badge-danger";return this.props.value>0&&(e="badge-success"),s.a.createElement("div",{className:""},s.a.createElement("label",null,this.props.name,":"),s.a.createElement("span",{className:"badge "+e,style:{float:"right",fontSize:"14px",width:"100px"}},100*this.props.value," points"))}}]),t}(s.a.Component),ReferenceValue:function(e){function t(e){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.annotation.data[this.props.field_name],t="badge-danger";return this.props.value[0]===e&&(t="badge-success"),s.a.createElement("div",{className:""},s.a.createElement("div",{style:{textAlign:"right",marginBottom:"10px",position:"relative"}},s.a.createElement("label",{style:{position:"absolute",top:"calc(50% - 14px)",left:"0"}},"Your answer:"),s.a.createElement("span",{className:"badge "+t,style:{fontSize:"14px",width:"100px",textAlign:"center",whiteSpace:"normal"}},e)),s.a.createElement("div",{style:{textAlign:"right",position:"relative"}},s.a.createElement("label",{style:{position:"absolute",top:"calc(50% - 14px)",left:"0"}},this.props.name,":"),s.a.createElement("span",{className:"badge "+t,style:{fontSize:"14px",width:"100px",textAlign:"center",whiteSpace:"normal"}},this.props.value[0])))}}]),t}(s.a.Component)},K={ReferenceScore:"Score",ReferenceValue:"Correct answer"},V=new(function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,[{key:"create",value:function(e,t,a,n){if(null!=a){var o=G[t];return s.a.createElement(o,{key:t,name:K[t],field_name:e,value:a,annotation:n})}return null}}]),e}()),Z=function(e){function t(e){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=[];for(var t in this.props.values){var a=this.props.values[t];e.push(V.create(this.props.field_name,t,a,this.props.annotation))}return s.a.createElement("div",{className:"row",style:{marginBottom:"30px"}},s.a.createElement("div",{className:"col-md-3",style:{textAlign:"center"}},s.a.createElement("b",null,"Fields")),s.a.createElement("div",{className:"col-md-9",style:{textAlign:"center"}},s.a.createElement("b",null,"Scores")),s.a.createElement("div",{className:"col-md-3",style:{borderRightStyle:"solid"}},s.a.createElement("span",{style:{top:"calc(50% - 14px)",position:"absolute"}},s.a.createElement("i",null,this.props.field_name))),s.a.createElement("div",{className:"col-md-9"},s.a.createElement("div",null,e)))}}]),t}(s.a.Component),$=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onAccept=a.onAccept.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onAccept",value:function(){this.props.onAccept()}},{key:"getFields",value:function(){var e=this.props.feedback,t={};for(var a in e.scores)for(var n in a in t===!1&&(t[a]=[]),e.scores[a]){var o=e.scores[a][n];t[a][n]=o}for(var i in e.values)for(var r in e.values[i]){var c=e.values[i][r];t[i][r]=c}var l=[];for(var u in t){var m=t[u];l.push(s.a.createElement(Z,{key:u,field_name:u,annotation:this.props.annotation,values:m}))}return l}},{key:"getAverageScore",value:function(){var e={},t=this.props.feedback;for(var a in t.scores){for(var n in e[a]=0,t.scores[a]){var s=t.scores[a][n];e[a]+=s}e[a]=e[a]/Object.keys(t.scores[a]).length}return e}},{key:"render",value:function(){this.props.feedback;var e=this.getAverageScore(),t=null;t=0===Math.max(Object.values(e))?s.a.createElement("span",null,"Your answer was not correct"):s.a.createElement("span",null,"Your answer was correct");var a=this.getFields();return s.a.createElement("div",{className:"modal-base"},s.a.createElement("div",{className:"shadow"}),s.a.createElement("div",{className:"feedback-panel card-3-static"},s.a.createElement("h4",{style:{textAlign:"center"}},"Feedback"),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12",style:{marginTop:"10px",marginBottom:"20px",textAlign:"center"}},t)),a,s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("button",{className:"btn btn-green",style:{width:"120px"},onClick:this.onAccept},"Ok"))))}}]),t}(s.a.Component),Q=a(28),X=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a.onClose=a.onClose.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"onClose",value:function(){this.props.onClose()}},{key:"render",value:function(){var e=this.props.task;return s.a.createElement("div",{className:"modal-base"},s.a.createElement("div",{className:"shadow",onClick:this.onClose}),s.a.createElement("div",{className:"instruction-panel col-md-8 col-sm-10 card-3-static"},s.a.createElement("button",{className:"btn btn-default",style:{width:"40px",float:"right",paddingTop:"4px"},onClick:this.onClose},s.a.createElement(T.Icon,{icon:Q.close,size:24,style:{marginLeft:"-5px"}})),s.a.createElement("h6",null,"Instruction"),s.a.createElement("h4",{style:{marginBottom:"20px"}},e.name),s.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.instruction}})))}}]),t}(s.a.Component),ee=function(){function e(t,a,n,s,o,i){Object(r.a)(this,e),this.id=t,this.progress=a,this.annotationsDone=n,this.annotationsTarget=s,this.status=o,this.reward=i}return Object(c.a)(e,[{key:"is_closed",get:function(){return"FINISHED"===this.status||"CLOSED"===this.status}}],[{key:"fromJson",value:function(t){if(null!==t&&t.id)return new e(t.id,t.progress,t.annotations_done,t.annotations_target,t.status,t.reward)}}]),e}(),te=function(){function e(t,a,n,s,o){Object(r.a)(this,e),this.id=t,this.task=a,this.annotationsTarget=n,this.closed=s,this.userBounty=o}return Object(c.a)(e,null,[{key:"fromJson",value:function(t){return new e(t.id,L.fromJson(t.task),t.annotations_target,t.closed,ee.fromJson(t.user_bounty))}}]),e}(),ae=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,null,[{key:"all",value:function(){return k.a.get("http://localhost:8888/api/v1/bounty",O.config).then(function(e){return e.data.map(function(e){return te.fromJson(e)})})}},{key:"get",value:function(e){return k.a.get("http://localhost:8888/api/v1/bounty/"+e,O.config).then(function(e){return te.fromJson(e.data)})}},{key:"getStatus",value:function(e){return k.a.get("http://localhost:8888/api/v1/bounty/"+e+"/status",O.config).then(function(e){return ee.fromJson(e.data)})}}]),e}(),ne={NEW:s.a.createElement("span",{className:"badge badge-warning",style:{fontSize:"14px"}},"Started"),IN_PROGRESS:s.a.createElement("span",{className:"badge badge-warning",style:{fontSize:"14px"}},"In progress"),FINISHED:s.a.createElement("span",{className:"badge badge-success",style:{fontSize:"14px"}},"Finished"),CLOSED:s.a.createElement("span",{className:"badge badge-secondary",style:{fontSize:"14px"}},"Closed")},se=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,userBounty:null,previousStatus:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateStatus()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.itemId!==e.itemId&&this.updateStatus()}},{key:"updateStatus",value:function(){var e=this;null!==this.props.bounty&&ae.getStatus(this.props.bountyId).then(function(t){var a=null;t&&(a=t.status)!=e.state.previousStatus&&"FINISHED"===a&&e.props.onBountyFinished(),e.setState({userBounty:t,previousStatus:a,loading:!1})})}},{key:"render",value:function(){var e=null,t="CLOSED";if(this.state.userBounty&&"CLOSED"!==this.state.userBounty.status){var a=this.state.userBounty;t=a.status;var n=100*a.progress,o=s.a.createElement("span",{className:"badge badge-secondary",style:{fontSize:"14px"}},"Bounty not finished");a.reward&&(o=s.a.createElement("span",{className:"badge badge-success",style:{fontSize:"14px"}},a.reward)),e=s.a.createElement("div",null,s.a.createElement("div",{className:"progress mission-progress"},s.a.createElement("div",{className:"progress-bar bounty-progress-bar",style:{width:n+"%"}})),s.a.createElement("p",{className:"bounty-progress-stats"},a.annotationsDone," / ",a.annotationsTarget," done"),s.a.createElement("p",null,s.a.createElement("b",null,"Reward code:")," ",o))}return s.a.createElement("div",{className:"col-sm-12 card-1-static bounty-status"},s.a.createElement("h4",null,"Bounty status"),s.a.createElement("p",null,s.a.createElement("b",null,"State:")," ",ne[t]),e)}}]),t}(s.a.Component),oe=a(29),ie=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onClose=a.onClose.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onClose",value:function(){this.props.onClose()}},{key:"render",value:function(){return s.a.createElement("div",{className:"modal-base"},s.a.createElement("div",{className:"shadow"}),s.a.createElement("div",{className:"confirmation-panel card-3-static"},s.a.createElement("h4",{style:{marginBottom:"20px"}},"Answer saved"),s.a.createElement("button",{className:"btn btn-green",style:{marginLeft:"20px",marginRight:"20px",width:"80px"},onClick:this.onClose},"Ok")))}}]),t}(s.a.Component);var re=new(function(){function e(){Object(r.a)(this,e),this.config={showFeedback:!1},this.initilized=!1}return Object(c.a)(e,[{key:"setup",value:function(e){this.config={showFeedback:!1},this.config.showFeedback=e.group>5,this.initilized=!0}}]),e}()),ce=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={item:null,task:null,bounty:null,loading:!0,feedback:null,annotation:null,instruction:!1,confirmation:!1},a.onAnnotationPost=a.onAnnotationPost.bind(Object(h.a)(Object(h.a)(a))),a.onFeedbackAccept=a.onFeedbackAccept.bind(Object(h.a)(Object(h.a)(a))),a.showInstruction=a.showInstruction.bind(Object(h.a)(Object(h.a)(a))),a.onInstructionClose=a.onInstructionClose.bind(Object(h.a)(Object(h.a)(a))),a.onConfirmationClose=a.onConfirmationClose.bind(Object(h.a)(Object(h.a)(a))),a.onBountyFinished=a.onBountyFinished.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.checkState()}},{key:"componentDidUpdate",value:function(e,t,a){this.state.task!==t.task&&(this.checkState(),this.checkInstruction())}},{key:"checkState",value:function(){var e=this;if(null===this.props.task)switch(this.props.match.path){case"/task/:id":var t=this.props.match.params.id;D.get(t).then(function(t){e.props.onTaskSelect(t)});break;case"/bounty/:id":var a=this.props.match.params.id;ae.get(a).then(function(t){e.props.onBountySelect(t)})}else this.getFirstItem(),this.checkInstruction()}},{key:"getFirstItem",value:function(){var e=this,t=this.props.task;k.a.get("http://localhost:8888/api/v1/tasks/"+t.id+"/next_item",O.config).then(function(t){e.setState({loading:!1,item:t.data})}).catch(function(t){e.setState({loading:!1}),console.log(t)})}},{key:"getNextItem",value:function(){var e=this,t=this.state.item;k.a.get("http://localhost:8888/api/v1/items/"+t.id+"/next_item",O.config).then(function(t){e.setState({loading:!1,item:t.data})}).catch(function(t){e.setState({loading:!1}),console.log(t)})}},{key:"onAnnotationPost",value:function(e){var t=null;re.config.showFeedback&&(t=e.data.annotation.feedback),t?this.setState({annotation:e.data.annotation,feedback:t}):this.showConfirmation()}},{key:"onFeedbackAccept",value:function(){this.state.feedback&&this.setState({feedback:null}),this.getNextItem()}},{key:"showConfirmation",value:function(){this.setState({confirmation:!0})}},{key:"onConfirmationClose",value:function(){this.state.confirmation&&this.setState({confirmation:!1}),this.getNextItem()}},{key:"checkInstruction",value:function(){"true"!==localStorage.getItem("FUNCROWD_INSTRUCTION_TASK"+this.state.task.id)&&this.showInstruction()}},{key:"showInstruction",value:function(){this.setState({instruction:!0}),localStorage.setItem("FUNCROWD_INSTRUCTION_TASK"+this.state.task.id,"true")}},{key:"onInstructionClose",value:function(){this.setState({instruction:!1})}},{key:"onBountyFinished",value:function(){var e=this.state.bounty;e&&(e.userBounty.status="FINISHED",this.setState({bounty:e}))}},{key:"render",value:function(){if(this.state.loading)return s.a.createElement("div",null,"Loading");var e=s.a.createElement("div",{className:"col-sm-12 item-panel card-1-static"},s.a.createElement("h3",{style:{display:"inline-block"}},"Item #",this.state.item.id),s.a.createElement("button",{className:"btn btn-default info-button",onClick:this.showInstruction},s.a.createElement(T.Icon,{icon:oe.info,size:24})),s.a.createElement(Y,{item:this.state.item,onAnnotationPost:this.onAnnotationPost})),t=null;this.state.feedback&&(t=s.a.createElement($,{feedback:this.state.feedback,onAccept:this.onFeedbackAccept,annotation:this.state.annotation}));var a=null;this.state.confirmation&&(a=s.a.createElement(ie,{onClose:this.onConfirmationClose}));var n=null;this.state.instruction&&(n=s.a.createElement(X,{task:this.props.task,onClose:this.onInstructionClose}));var o=null;return this.state.bounty&&(o=s.a.createElement(se,{itemId:this.state.item.id,onBountyFinished:this.onBountyFinished,bountyId:this.state.bounty.id}),null==this.state.bounty.userBounty&&(e=null),this.state.bounty.userBounty&&this.state.bounty.userBounty.is_closed&&(e=null)),s.a.createElement("div",{className:"row base-row"},n,a,t,o,e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.task!==t.task?{task:e.task}:e.bounty!==t.bounty?{bounty:e.bounty}:null}}]),t}(s.a.Component),le=a(30),ue=a(31),me=a(32),he=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.bounty,t=e.task,a=e.userBounty;if(a){var n=Math.min(100*a.progress,100),o=Math.min(a.annotationsDone,e.annotationsTarget);return"NEW"===a.status||"IN_PROGRESS"===a.status?s.a.createElement("div",{className:"col-md-4",style:{marginBottom:"40px"}},s.a.createElement("div",{className:"bounty-card card-2",onClick:this.props.onSelect},s.a.createElement("div",{className:"bounty-card-header"},s.a.createElement("h6",null,"Bounty in progress"),s.a.createElement("h6",{className:"bounty-card-id"},"#",e.id)),s.a.createElement("div",{className:"bounty-card-title-base"},s.a.createElement("div",{className:"bounty-card-icon"},s.a.createElement(T.Icon,{icon:ue.unlock,size:32})),s.a.createElement("div",{className:"bounty-card-title"},s.a.createElement("h4",null,"#",e.id," ",t.name))),s.a.createElement("div",{className:"card-progress-bar"},s.a.createElement("div",{className:"progress mission-progress"},s.a.createElement("div",{className:"progress-bar bounty-progress-bar",style:{width:n+"%"}})),s.a.createElement("p",{className:"bounty-progress-stats"},o," / ",e.annotationsTarget," done")))):s.a.createElement("div",{className:"col-md-4",style:{marginBottom:"40px"}},s.a.createElement("div",{className:"bounty-card finished-card card-2-static"},s.a.createElement("div",{className:"bounty-card-header"},s.a.createElement("h6",null,"Bounty finished"),s.a.createElement("h6",{className:"bounty-card-id"},"#",e.id)),s.a.createElement("div",{className:"bounty-card-title-base"},s.a.createElement("div",{className:"bounty-card-icon"},s.a.createElement(T.Icon,{icon:me.trophy,size:32})),s.a.createElement("div",{className:"bounty-card-title"},s.a.createElement("h4",null,t.name))),s.a.createElement("div",{className:"card-progress-bar"},s.a.createElement("div",{className:"progress mission-progress"},s.a.createElement("div",{className:"progress-bar bounty-progress-bar",style:{width:n+"%"}})),s.a.createElement("p",{className:"bounty-progress-stats"},o," / ",e.annotationsTarget," done"))))}return s.a.createElement("div",{className:"col-md-4",style:{marginBottom:"40px"}},s.a.createElement("div",{className:"bounty-card closed-card card-2-static"},s.a.createElement("div",{className:"bounty-card-header"},s.a.createElement("h6",null,"Bounty closed"),s.a.createElement("h6",{className:"bounty-card-id"},"#",e.id)),s.a.createElement("div",{className:"bounty-card-title-base"},s.a.createElement("div",{className:"bounty-card-icon"},s.a.createElement(T.Icon,{icon:le.lock,size:32})),s.a.createElement("div",{className:"bounty-card-title"},s.a.createElement("h4",null,"#",e.id," ",t.name)))))}}]),t}(s.a.Component),de=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={bounties:null,loading:!0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;ae.all().then(function(t){e.setState({loading:!1,bounties:t})}).catch(function(t){e.setState({loading:!1}),console.log(t)})}},{key:"getCardsPanel",value:function(){var e=this,t=null;if(this.state.loading)t=s.a.createElement("div",null,"Loading");else{console.log(this.state);var a=this.state.bounties.map(function(t,a){return s.a.createElement(he,{key:a,bounty:t,onSelect:function(){return e.props.onBountySelect(t)}})});t=s.a.createElement("div",{className:"row"},a)}return t}},{key:"render",value:function(){return s.a.createElement("div",{className:"row base-row"},s.a.createElement("div",{className:"col-sm-12 bounties-header-bar"},s.a.createElement("h3",null,"Bounties"),s.a.createElement("p",null,"Tasks performed in the form of bounty have the required number of items to perform. After completing the appropriate number of items, the reward code will be unlocked, which you can use to close the task and redeem the reward."),s.a.createElement("p",null,"Click on the card below to begin your work on selected bounty.")),s.a.createElement("div",{className:"col-sm-12"},this.getCardsPanel()))}}]),t}(s.a.Component),pe=a(33),be=a.n(pe),ve=v.b.div({}),fe=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={checkingUser:!0,checkingParams:!0,user:null,mission:null,task:null,bounty:null},a.onLogin=a.onLogin.bind(Object(h.a)(Object(h.a)(a))),a.onLogout=a.onLogout.bind(Object(h.a)(Object(h.a)(a))),a.onMissionSelect=a.onMissionSelect.bind(Object(h.a)(Object(h.a)(a))),a.onTaskSelect=a.onTaskSelect.bind(Object(h.a)(Object(h.a)(a))),a.onBountySelect=a.onBountySelect.bind(Object(h.a)(Object(h.a)(a))),a.navigateToMissions=a.navigateToMissions.bind(Object(h.a)(Object(h.a)(a))),a.navigateToBounties=a.navigateToBounties.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.checkSessionUser(),this.checkUrlParams()}},{key:"checkSessionUser",value:function(){var e=O.getUser();e?this.onLogin(e):this.setState({checkingUser:!1})}},{key:"checkUrlParams",value:function(){var e=this;if(this.props.location.search){var t=be.a.parse(this.props.location.search);"workerId"in t&&w.mturk(t.workerId).then(function(t){e.onLogin(t,!0),e.setState({checkingParams:!1})})}else this.setState({checkingParams:!1})}},{key:"onLogin",value:function(e,t){O.login(e,t),re.setup(e),this.setState({user:e,checkingUser:!1}),"/"===this.props.location.pathname&&this.props.history.push("/bounties")}},{key:"onLogout",value:function(){this.setState({user:null}),O.logout(),this.props.history.push("/")}},{key:"onMissionSelect",value:function(e){this.setState({mission:e}),this.props.history.push("/mission/"+e.id+"/tasks")}},{key:"onTaskSelect",value:function(e){this.setState({task:e}),this.props.history.push("/task/"+e.id)}},{key:"onBountySelect",value:function(e){this.setState({bounty:e,task:e.task}),this.props.history.push("/bounty/"+e.id)}},{key:"navigateToMissions",value:function(){this.props.history.push("/missions")}},{key:"navigateToBounties",value:function(){this.props.history.push("/bounties")}},{key:"render",value:function(){var e=this;return s.a.createElement(d.a,{render:function(t){var a=t.location;return s.a.createElement("div",{className:"container h-100"},s.a.createElement(F,{user:e.state.user,onLogout:e.onLogout,onNavigateToMissions:e.navigateToMissions,onNavigateToBounties:e.navigateToBounties}),e.state.checkingUser||e.state.checkingParams?s.a.createElement("div",null,"Loading"):s.a.createElement(v.a,{preEnterPose:"preenter",className:"h-100 w-100"},s.a.createElement(ve,{key:a.pathname},s.a.createElement(p.a,{location:a},s.a.createElement(d.a,{exact:!0,path:"/",render:function(t){return s.a.createElement(x,Object.assign({onSuccess:e.onLogin},t))}}),s.a.createElement(d.a,{path:"/missions",render:function(t){return s.a.createElement(S,Object.assign({onMissionSelect:e.onMissionSelect,user:e.state.user},t))}}),s.a.createElement(d.a,{path:"/bounty/:id",render:function(t){return s.a.createElement(ce,Object.assign({task:e.state.task,user:e.state.user,bounty:e.state.bounty,onBountySelect:e.onBountySelect},t))}}),s.a.createElement(d.a,{path:"/bounties",render:function(t){return s.a.createElement(de,Object.assign({onBountySelect:e.onBountySelect,user:e.state.user},t))}}),s.a.createElement(d.a,{path:"/task/:id",render:function(t){return s.a.createElement(ce,Object.assign({task:e.state.task,user:e.state.user,onTaskSelect:e.onTaskSelect},t))}}),s.a.createElement(d.a,{path:"/mission/:id/tasks",render:function(t){return s.a.createElement(P,Object.assign({onTaskSelect:e.onTaskSelect,onMissionSelect:e.onMissionSelect,mission:e.state.mission,user:e.state.user},t))}})))))}})}}]),t}(s.a.Component),ge=Object(b.a)(fe),ke=a(91),ye=(a(82),a(84),a(87),function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(ke.a,null,s.a.createElement(ge,null))}}]),t}(s.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,2,1]]]);
//# sourceMappingURL=main.6a681436.chunk.js.map